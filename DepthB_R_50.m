function [Y,Xf,Af] = DepthB_R_50(X,~,~)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 16-Apr-2021 14:48:42.
%
% [Y] = myNeuralNetworkFunction(X,~,~) takes these arguments:
%
%   X = 1xTS cell, 1 inputs over TS timesteps
%   Each X{1,ts} = Qx7 matrix, input #1 at timestep ts.
%
% and returns:
%   Y = 1xTS cell of 1 outputs over TS timesteps.
%   Each Y{1,ts} = Qx1 matrix, output #1 at timestep ts.
%
% where Q is number of samples (or series) and TS is the number of timesteps.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [2644.1;2622.1;2710;2631.8;2641.6;955.1;-22.3];
x1_step1.gain = [0.0137741046831956;0.0105042016806723;0.0204918032786885;0.0124069478908189;0.0127959053103007;0.0544959128065396;0.066006600660066];
x1_step1.ymin = -1;

% Layer 1
b1 = [-0.008728900428000483519;0.26245686062583706288;-0.0096939041880483856062;0.0033546909825794852394;-0.0051366401554948856734;-0.032364300537239321098;0.00026378539822791548328;1.8470216290230931921;-0.011151964293167232131;-0.0031697404778824084422;0.035811384395723767915;0.010752018403728384396;0.0069344834364856436024;0.12264163606068162471;0.0081452212979380295144;-0.15923160130953986635;-0.012164267001756432982;0.0050170122160840286557;-0.26784173311263814732;0.0075543006769580147222;1.4543492096149777115;0.019165825213597536408;-0.019661186522868526888;0.0039580519040105987746;-0.012486434195111348333;0.0041739895891135612299;1.8760307539556380085;0.002749218089682012138;-0.0010972110717994854739;2.3342170963162072184;-0.00015826424817679660595;-0.0071467679537730050693;-0.26947329348408699534;0.01534348697235821124;-0.00062732249655191236245;0.0080597512701155553383;-0.024951480788246660492;0.014186971438388077185;-0.01722116981002841038;-0.011123971042297627065;-0.0030060066786202605492;-0.0027396201664798853354;-0.0014292998947996822436;0.0016849034412685815355;0.00027611406260437149508;0.0072022027362798630296;-0.06475937803683139149;-0.0035030484096387707466;-0.008279371651603927712;0.011233113876788332341];
IW1_1 = [0.021049661138118392484 0.029704398362918299492 -0.0063338316942268798118 -0.045797566682727025578 -0.017063857419675032556 -0.0092944924812789989771 -0.028743842558696289236;-0.11090085920986075818 0.0092388489623555936775 0.24309783007088431317 -0.20026852478175835581 -0.18013582004127220992 -0.10589760844234172299 0.10097400212653663554;0.016953713436222973138 -0.0034613303792083390843 0.013101982229901158739 0.016446400286355623149 -0.018535932172080719221 0.017932852921930086953 0.0073393484259807037148;0.03554348611862480356 0.024015202792085209305 -0.025719090454095230175 -0.031594118646586261123 -0.01178850023372902435 -0.031478814846248606707 0.0041900961803676825199;0.042967965890578260768 0.031162749019645098053 -0.02516123244331579939 -0.046008809055332194893 -0.022629736795159199891 -0.021699904820596700727 -0.0086041725688194500843;0.015669456646115575982 -0.0031993308882416198087 0.034693866641875709123 0.0028758997854767217629 -0.039168795323523943053 0.056492049912854239158 -0.029689835652574863428;-0.04145492097070437032 -0.02188216810896518108 0.01635967397811121174 0.026012049167600432426 0.025508867584855109828 0.031004934966713387778 -0.0067471361085959099743;3.12309866355159782 -0.56864679450129707039 10.121190465903163513 -0.85081345860863799579 -0.10926295636857272231 -2.5644314000078449745 -1.0507344027858800395;0.010010571867382746583 0.011850931136629943782 0.032930408241386099899 -0.0042528610581981096672 -0.027964740447789526029 0.041502520257172666185 -0.037976697180989907321;0.011881571508042086324 0.025615444832214138982 0.012274545764250296281 -0.029275071075662385811 -0.016392953185531786153 0.0069745414305640825517 -0.034176701711246468274;-0.019102150712270622723 0.0058806078543627987587 -0.034388440620987073548 -0.0036111196555403111443 0.044384044734339982152 -0.056973040762963965411 0.023934297029491999331;-0.037328186422026524149 -0.019562292357698338185 0.0007933100405126699119 0.024206987768233548947 0.034694265062162985003 0.014890649755834435564 0.0084407176642259888061;0.034394624466054957157 0.028582796897625363519 -0.032423788844075859816 -0.038995323149122865236 -0.0010761325053014780036 -0.032693753238201568589 0.0043220558201558113148;0.23148928683224526126 0.076200224466881169572 -0.10567255600602032395 0.19225565342667488844 0.24701545921693418562 0.02152283422476984967 0.17769625163200947204;0.04212573012507681014 0.03544013602787082079 -0.040190378295812755061 -0.045802096311529039152 -0.00031166928633516189371 -0.031328414763196511805 0.0043798844570737639412;-0.13529088116581319823 -0.20144870726685706885 -0.034241443484502073757 0.011622962028975319243 -0.091252961944506397196 0.048932816692623622157 -0.17305405177101726433;0.021604070004736873611 0.026906059275534115888 -0.00068455772017324528333 -0.039139545408212308986 -0.021518885270890249217 -0.0055851915957298931339 -0.029237082788747117273;0.016742067870118882561 0.017467191657722324488 -0.022314573892533048211 -0.028746649324719538571 0.0023463685812954017222 -0.029880707485929306616 0.0017670540796763470077;0.34526583595474275024 -0.21549221778829977247 0.26397881873304390732 -0.036060183775174038667 -0.063852479875666626197 0.046878129963928052981 -0.0073812973720628841795;0.039843512183126157666 0.032200998038223863085 -0.036099309443150519316 -0.042145713696849100571 -0.0024160102146731712858 -0.032413915875314412707 0.0046210917771246778907;0.81971812880907768406 0.041545432969087345287 0.89941400223832224103 0.17187845680413560423 0.33575521105032135605 -0.022907074332976347375 -0.40647685187733290091;-0.10772998248955231726 -0.22609598299053063064 0.28726943302653773493 0.16745759406039179007 -0.079025019795687420632 -0.062529275650036228451 0.1097718507147662087;-0.012032464312951464749 -0.032258942521002836878 0.02413854853687985233 0.043403821758555130583 -0.017985417736721506787 0.032909191615262990693 0.011897755007368789049;0.039653622232803595327 0.026137468967868272146 -0.026543424250542537596 -0.033230404888147845044 -0.014274173354857498663 -0.03236104525799612941 0.0046972743524056632253;-0.0079456322971195036953 0.027038619161586566891 -0.09958372423838196541 -0.020773512323963263387 0.03052919119863248959 -0.00706279377064324837 0.026612959415873608388;0.028428355817366354058 0.022220963872407090839 -0.025979761925507636328 -0.031882929642592976183 -0.0044917414537225643437 -0.03107315055030227674 0.0033634171601885569196;0.90580848739118524637 0.89464713595786493627 1.0151143194923339941 0.25568441805184755067 0.35159120610064586998 -0.22199824330359685387 -0.52200437698400659059;-0.023322581425134481653 -0.012909212021324941583 0.013378840091499887011 0.016241139745019120971 0.013860496712484106363 0.020852277855617960822 -0.0019605821978138223902;-0.0029789803074394432571 -0.0055772581640366426445 0.010482601024294772168 0.012923705238405410606 -0.0012333493385609638898 0.015935966403400468605 0.00089268298157943470634;0.87014060697977557712 1.8446193003373727581 1.6288929464776142897 0.27065905082495150813 0.25279198201207958574 -0.53561488067218110398 -0.64900497227262221589;-0.0026267793214513278886 -0.0036551661672433555066 0.0067912784006302576861 0.0082009045068544474816 0.000156610999562755435 0.010458783698019440134 0.00062650940545953153794;0.039795120724455963768 0.028104324672826166281 -0.019498029289703865119 -0.041882639138813251845 -0.02527848904740006078 -0.020588290584314637016 -0.010162974523123773432;0.027652553969570649317 -0.008447843627754789142 -0.15432464817786584188 0.0170414944414452596 -0.1543812663731267687 -0.044833891752639382089 0.19065999933223864993;-0.0045652770836432697912 0.015185959652659434052 -0.018744027533946570896 -0.027954606296827600592 0.019346377944123815257 -0.031105593592007447362 -0.0057520265895605986184;-0.042742787284282282578 -0.023797895739111757374 0.01834515843476591801 0.029060072878006108082 0.024906358173401040024 0.031506238360028110401 -0.005494458808955725998;0.046249837365718873827 0.040912556396766087963 -0.047897449190223186088 -0.051873687272331547859 0.0019173810064554790665 -0.027807610817331900044 0.0031902816324708986769;-0.48689539892043637304 -0.072557765866117202025 -0.20697094111964489671 0.54828523252399830046 0.3115119661615609048 0.22824553171023295728 -0.17597302185828778143;-0.0016515340158037507441 0.025070691323462821615 -0.012386814770693154591 -0.034306345560992448918 0.0088461996688266753691 -0.015955065046197879769 -0.025688515932875740505;0.0026190069367638714459 -0.023228281687778722792 0.017667459346104186918 0.033883503746011268964 -0.015468262639907529726 0.024043378238007891839 0.018802907494150894463;-0.033267796689682299638 -0.039222864068107474167 0.04201322926410641645 0.051572892122015837058 -0.014703739302652360163 0.030905014692265097426 -0.0022261872166876857208;0.0061312560322326859971 -0.0015328814202831967436 0.0075542078214470781763 0.0094372606863967981733 -0.0069147594438668212591 0.011393949029900481834 0.0019853322098196866073;-0.048360242898443810133 -0.061227629129577798572 0.074503260646519658961 0.076417082929113630541 -0.017099405754394080004 0.0065227934611377510685 0.016584949234995149947;-0.035673397267337363103 -0.022016199819083835665 0.022093245834342568196 0.02804670954513035705 0.016229775061718420409 0.030290906456977018113 -0.0042109889992095602892;0.047540905177536479931 0.031987842287104634176 -0.028517673746327482781 -0.042592291416700733819 -0.020498327460009551498 -0.028624880060657349051 -0.0002198957564888404635;0.00013368916500742248016 0.0012356660789454741375 -0.0029119533179880860603 -0.003516620362874150682 0.00059966220578721121139 -0.0044882124353935060751 -0.00043066606791809666993;0.033646736531518305069 0.028711641786055615982 -0.032623540572697118378 -0.039394068100480301997 0.00016502018345910092695 -0.032757405702231560951 0.0042727114424547536081;-0.074851888239344924192 -0.043459226549339202705 -0.00537368685849043317 0.022461269855451805599 0.0022982602352416762852 0.14081363719916678567 -0.028792688955493285496;0.012087003366485995007 0.0034846653086844552386 0.00039687842062158061986 0.00065230532725465658391 -0.0094870679472509895219 -0.00031451509717584936457 0.0017603386982954168961;-0.041405152345642001754 -0.036209436787191788543 0.041360725299676034949 0.047069104104259122667 -0.0017979494106064091916 0.030830780049337411231 -0.0041528748436046106218;0.029516029045002854792 0.033596157986483542179 -0.035838549236198363745 -0.045557387812022745455 0.012287938470817440575 -0.033881326278699427923 0.0034887992101089236423];

% Layer 2
b2 = -0.18912857215180653436;
LW2_1 = [0.042790187758345352154 0.52992510935052861143 -0.025783974754455370876 0.063262725472282815842 0.066642292161016830621 -0.055498237535358263539 -0.053611332291608283784 -1.0043451102115272811 -0.037916926316925954332 0.010324989365071991429 0.056918524254985135291 -0.031165912991851674185 0.075022991020676957352 -0.11389416755074537047 0.085779347772040007158 -0.1882502208641885777 0.032939240151112339494 0.055451314177484806178 0.5262535647215313972 0.080448323181717629193 0.27394802231114134816 -0.27180519192767199632 -0.069516217711866432061 0.06625398412335212206 0.075134459308238699116 0.062658119515278193346 -0.61744510145186437544 -0.034680476963059155004 -0.024235162637415642167 0.60478217444429971383 -0.015557639110187494388 0.058449772524134753493 0.28573992743037679443 0.050401413591483909538 -0.057521572754577053599 0.093886525929377059874 0.47196949936565774086 0.037386899441079271544 -0.047099453848003597356 -0.091604482456368818699 -0.015825967315098835725 -0.11697029911321285556 -0.057183690660948263695 0.072556874538036414402 0.0064431785898007775878 0.07552324401697103895 -0.12561260690520661965 0.0017332711697305908972 -0.087300834594024379065 0.084078922544435205633];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.0246913580246914;
y1_step1.xoffset = 0;

% ===== SIMULATION ========

% Format Input Arguments
isCellX = iscell(X);
if ~isCellX
    X = {X};
end

% Dimensions
TS = size(X,2); % timesteps
if ~isempty(X)
    Q = size(X{1},1); % samples/series
else
    Q = 0;
end

% Allocate Outputs
Y = cell(1,TS);

% Time loop
for ts=1:TS
    
    % Input 1
    X{1,ts} = X{1,ts}';
    Xp1 = mapminmax_apply(X{1,ts},x1_step1);
    
    % Layer 1
    a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*Xp1);
    
    % Layer 2
    a2 = repmat(b2,1,Q) + LW2_1*a1;
    
    % Output 1
    Y{1,ts} = mapminmax_reverse(a2,y1_step1);
    Y{1,ts} = Y{1,ts}';
end

% Final Delay States
Xf = cell(1,0);
Af = cell(2,0);

% Format Output Arguments
if ~isCellX
    Y = cell2mat(Y);
end
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
x = bsxfun(@minus,y,settings.ymin);
x = bsxfun(@rdivide,x,settings.gain);
x = bsxfun(@plus,x,settings.xoffset);
end
